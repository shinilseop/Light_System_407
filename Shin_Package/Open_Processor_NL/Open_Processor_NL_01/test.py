# 제어조건(변형가능)
import pandas as pd
import numpy as np

path = 'D:\\BunkerBuster\\Desktop\\shin_excel\\실시간 조도변화'

lock_step = 5  # LED 잠금시 잠굴 범위 값
similar_led_range = 1  # 방향성고려나 제어조도기준 선정할 때 영향도의 비슷한 범위를 위한 값
object_illum = 700
isFinish = True
first_matched = False
can_control = False
is_exit = [False]
satisfy_flag = [True]
has_control_before = [True]
save_folder = "0"
accel = 4  # 5도 나쁘지 않을것 같음 다만 방향성고려가 제어에 들어가야 될듯함.

# 저장 변수
df_record = []
led_state_case_limit = []
illum_add = []
illum_change_time = []
illum_satisfy_time = []
acs_cct = np.zeros(9)
II_illum = np.zeros(9)
IC_curr = np.zeros(10)
led_is_change=[False,
               False,False,False,False,False,False,
               False,False,False,False,False,False,
               False,False,False,False,False,False,
               False,False,False,False,False,False,
               False,False,False,False,False,False,]
cal_lux =[0,0,0,
          0,0,0,
          0,0,0]

# new led control index
led_control = [[0, 0, 0, 0],
               [0, 16, 0, 0], [0, 14, 6, 0], [0, 14, 7, 0], [0, 13, 9, 0], [0, 14, 8, 0], [0, 15, 7, 0],
               [0, 15, 8, 0], [0, 16, 8, 0], [0, 16, 9, 0], [0, 16, 10, 0], [0, 17, 9, 0], [0, 17, 10, 0],
               [0, 18, 11, 0], [0, 18, 12, 0], [0, 19, 11, 0], [0, 19, 12, 0], [0, 20, 11, 0], [0, 20, 12, 0],
               [0, 20, 13, 0], [0, 21, 13, 0], [0, 22, 13, 0], [0, 22, 14, 0], [0, 21, 15, 0], [0, 23, 14, 0],
               [0, 25, 13, 0], [0, 24, 14, 0], [0, 23, 15, 0], [0, 25, 14, 0], [0, 24, 15, 0], [0, 25, 15, 0],
               [0, 24, 16, 0], [0, 25, 16, 0], [0, 26, 16, 0], [0, 27, 16, 0], [0, 28, 15, 0], [0, 27, 17, 0],
               [0, 28, 16, 0], [0, 28, 17, 0], [0, 29, 16, 0], [0, 29, 17, 0], [0, 29, 18, 0], [0, 30, 17, 0],
               [0, 29, 19, 0], [0, 29, 20, 0], [0, 30, 18, 0], [0, 30, 19, 0], [0, 30, 20, 0], [0, 31, 19, 0],
               [0, 30, 21, 0], [0, 31, 20, 0], [0, 31, 21, 0], [0, 32, 20, 0], [0, 32, 21, 0], [0, 31, 23, 0],
               [0, 33, 20, 0], [0, 32, 23, 0], [0, 33, 21, 0], [0, 33, 22, 0], [0, 33, 23, 0], [0, 34, 22, 0],
               [0, 34, 23, 0], [0, 35, 22, 0], [0, 34, 24, 0], [0, 34, 25, 0], [0, 35, 24, 0], [0, 34, 26, 0],
               [0, 36, 23, 0], [0, 36, 24, 0], [0, 37, 23, 0], [0, 36, 25, 0], [0, 37, 24, 0], [0, 36, 26, 0],
               [0, 37, 25, 0], [0, 37, 26, 0], [0, 38, 25, 0], [0, 37, 27, 0], [0, 39, 24, 0], [0, 38, 26, 0],
               [0, 39, 25, 0], [0, 38, 27, 0], [0, 39, 26, 0], [0, 40, 25, 0], [0, 38, 28, 0], [0, 39, 27, 0],
               [0, 41, 25, 0], [0, 39, 28, 0], [0, 40, 27, 0], [0, 41, 26, 0], [0, 40, 28, 0], [0, 39, 30, 0],
               [0, 41, 28, 0], [0, 42, 27, 0], [0, 41, 29, 0], [0, 42, 28, 0], [0, 43, 27, 0], [0, 41, 30, 0],
               [0, 42, 29, 0], [0, 42, 30, 0], [0, 43, 29, 0], [0, 43, 30, 0], [0, 44, 29, 0], [0, 44, 30, 0],
               [0, 45, 29, 0], [0, 44, 31, 0], [0, 45, 30, 0], [0, 45, 31, 0], [0, 46, 30, 0], [0, 46, 31, 0],
               [0, 47, 30, 0], [0, 46, 32, 0], [0, 47, 31, 0], [0, 48, 30, 0], [0, 47, 32, 0], [0, 49, 30, 0],
               [0, 46, 34, 0], [0, 48, 32, 0], [0, 49, 31, 0], [0, 48, 33, 0], [0, 49, 32, 0], [0, 48, 34, 0],
               [0, 49, 33, 0], [0, 50, 32, 0], [0, 50, 33, 0], [0, 49, 34, 0], [0, 49, 35, 0], [0, 50, 34, 0],
               [0, 52, 34, 0], [0, 51, 34, 0], [0, 50, 36, 0], [0, 51, 35, 0], [0, 53, 33, 0], [0, 50, 37, 0],
               [0, 52, 35, 0], [0, 54, 33, 0], [0, 52, 36, 0], [0, 53, 35, 0], [0, 54, 34, 0], [0, 53, 36, 0],
               [0, 55, 34, 0], [0, 54, 36, 0], [0, 55, 35, 0], [0, 56, 34, 0], [0, 53, 38, 0], [0, 54, 37, 0],
               [0, 55, 36, 0], [0, 55, 37, 0], [0, 56, 36, 0], [0, 55, 38, 0], [0, 56, 37, 0], [0, 58, 35, 0],
               [0, 55, 39, 0], [0, 56, 38, 0], [0, 54, 41, 0], [0, 57, 38, 0], [0, 59, 36, 0], [0, 55, 41, 0],
               [0, 57, 39, 0], [0, 60, 36, 0], [0, 56, 41, 0], [0, 58, 39, 0], [0, 59, 38, 0], [0, 60, 37, 0],
               [0, 56, 42, 0], [0, 59, 39, 0], [0, 60, 38, 0], [0, 58, 41, 0], [0, 59, 40, 0], [0, 59, 41, 0],
               [0, 60, 40, 0], [0, 62, 38, 0], [0, 58, 43, 0], [0, 59, 42, 0], [0, 61, 40, 0], [0, 62, 39, 0],
               [0, 60, 42, 0], [0, 61, 41, 0], [0, 62, 40, 0], [0, 62, 41, 0], [0, 63, 40, 0], [0, 60, 44, 0],
               [0, 62, 42, 0], [0, 63, 41, 0], [0, 63, 42, 0], [0, 64, 41, 0], [0, 61, 45, 0], [0, 63, 43, 0],
               [0, 64, 42, 0], [0, 66, 40, 0], [0, 61, 46, 0], [0, 64, 43, 0], [0, 65, 42, 0], [0, 67, 40, 0],
               [0, 64, 44, 0], [0, 65, 43, 0], [0, 68, 40, 0], [0, 64, 45, 0], [0, 66, 43, 0], [0, 68, 41, 0],
               [0, 63, 47, 0], [0, 66, 44, 0], [0, 68, 42, 0], [0, 67, 44, 0], [0, 68, 43, 0], [0, 69, 42, 0],
               [0, 67, 45, 0], [0, 68, 44, 0], [0, 69, 43, 0], [0, 66, 47, 0], [0, 67, 46, 0], [0, 68, 45, 0],
               [0, 70, 43, 0], [0, 67, 47, 0], [0, 69, 45, 0], [0, 70, 44, 0], [0, 67, 48, 0], [0, 69, 46, 0],
               [0, 71, 44, 0], [0, 68, 48, 0], [0, 69, 47, 0], [0, 70, 46, 0], [0, 72, 44, 0], [0, 69, 48, 0],
               [0, 70, 47, 0], [0, 71, 46, 0], [0, 70, 48, 0], [0, 71, 47, 0], [0, 69, 50, 0], [0, 70, 49, 0],
               [0, 72, 47, 0], [0, 69, 51, 0], [0, 73, 47, 0]]
led_control_lux = [0, 24, 26, 27, 28, 29, 30, 31, 32, 33, 35, 36, 37, 38, 43, 44, 45, 46, 48, 49, 51, 53, 55, 56, 57,
                   58, 59, 60, 61, 62, 63, 64, 66, 67, 68, 70, 71, 72, 73, 74, 76, 78, 79, 80, 81, 82, 83, 84, 85, 86,
                   88, 89, 91, 92, 93, 94, 96, 97, 98, 100, 101, 103, 104, 105, 107, 108, 109, 110, 112, 113, 114, 115,
                   116, 117, 118, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 132, 133, 134, 135, 137, 138,
                   139, 141, 142, 143, 144, 145, 148, 149, 151, 152, 154, 155, 157, 158, 161, 162, 164, 166, 167, 168,
                   169, 170, 171, 173, 174, 175, 177, 178, 180, 181, 182, 184, 185, 186, 187, 189, 190, 193, 194, 195,
                   196, 197, 198, 200, 201, 202, 203, 204, 206, 207, 208, 209, 210, 211, 213, 214, 216, 217, 218, 219,
                   220, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 236, 237, 238, 239, 240, 241,
                   242, 243, 244, 245, 246, 247, 249, 250, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263,
                   264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284,
                   285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 299, 300, 301, 302, 303, 304, 306]

led_influ = [[],
             [0.603, 0.1369, 0.0373, 0.1695, 0.0736, 0.022, 0.0353, 0.0284, 0.0153],
             [0.9938, 0.3525, 0.0685, 0.1983, 0.1469, 0.0479, 0.0435, 0.0443, 0.0206],
             [0.5215, 0.7519, 0.169, 0.1312, 0.1736, 0.0793, 0.0292, 0.0522, 0.0364],
             [0.1932, 0.7699, 0.4707, 0.0688, 0.1399, 0.1682, 0.022, 0.0568, 0.0492],
             [0.0777, 0.3102, 0.8227, 0.0317, 0.069, 0.1907, 0.0168, 0.042, 0.0545],
             [0.0396, 0.1242, 0.6377, 0.0173, 0.0365, 0.185, 0.0168, 0.0238, 0.0555],
             [0.4547, 0.1401, 0.0423, 0.4597, 0.1562, 0.04, 0.1113, 0.059, 0.0227],
             [0.6591, 0.3483, 0.0735, 0.6035, 0.3816, 0.0681, 0.1236, 0.0919, 0.0428],
             [0.3827, 0.7213, 0.1771, 0.3218, 0.5675, 0.1592, 0.0928, 0.1283, 0.0629],
             [0.1582, 0.698, 0.4395, 0.1252, 0.3467, 0.3312, 0.0579, 0.1214, 0.1032],
             [0.0629, 0.2753, 0.7654, 0.0473, 0.1422, 0.5594, 0.024, 0.0919, 0.1212],
             [0.0332, 0.1115, 0.5743, 0.0209, 0.0527, 0.4279, 0.0189, 0.0545, 0.1106],
             [0.1963, 0.0999, 0.0393, 0.7102, 0.2201, 0.0456, 0.3054, 0.1033, 0.0354],
             [0.226, 0.1633, 0.0534, 0.9368, 0.5466, 0.076, 0.329, 0.1816, 0.0513],
             [0.1603, 0.3039, 0.0956, 0.4944, 0.958, 0.1918, 0.2397, 0.3564, 0.1138],
             [0.0989, 0.2996, 0.2495, 0.1552, 0.5118, 0.5763, 0.1093, 0.353, 0.2526],
             [0.0534, 0.1602, 0.3078, 0.0592, 0.1747, 0.9563, 0.0548, 0.1839, 0.3543],
             [0.0258, 0.082, 0.2716, 0.0233, 0.076, 0.6753, 0.024, 0.1022, 0.3045],
             [0.0809, 0.0566, 0.0302, 0.4189, 0.1666, 0.04, 0.6022, 0.1396, 0.0428],
             [0.0904, 0.0841, 0.0393, 0.5604, 0.3781, 0.0659, 0.9175, 0.328, 0.0735],
             [0.0724, 0.1073, 0.0644, 0.3086, 0.5245, 0.1569, 0.4605, 0.8035, 0.1721],
             [0.0512, 0.0989, 0.0896, 0.118, 0.2631, 0.3335, 0.1699, 0.7865, 0.4815],
             [0.0332, 0.0777, 0.1208, 0.052, 0.1399, 0.6303, 0.0774, 0.3564, 0.8809],
             [0.0174, 0.0471, 0.1137, 0.0209, 0.0574, 0.4616, 0.0363, 0.1373, 0.6181],
             [0.0385, 0.026, 0.0192, 0.1695, 0.0934, 0.031, 0.6197, 0.1396, 0.0417],
             [0.0385, 0.0376, 0.0282, 0.1707, 0.1469, 0.0535, 0.8528, 0.3303, 0.0693],
             [0.0364, 0.046, 0.0373, 0.124, 0.1782, 0.0838, 0.4564, 0.7264, 0.1646],
             [0.0279, 0.0481, 0.0524, 0.07, 0.1364, 0.1805, 0.1873, 0.791, 0.4666],
             [0.0152, 0.0302, 0.0514, 0.0305, 0.0748, 0.194, 0.0702, 0.3235, 0.7728],
             [0.0152, 0.0217, 0.0554, 0.0185, 0.0446, 0.1997, 0.0405, 0.1373, 0.544]]

# init LED state
led_state_0 = [0,
               0, 0, 0, 0, 0, 0,
               0, 0, 0, 0, 0, 0,
               0, 0, 0, 0, 0, 0,
               0, 0, 0, 0, 0, 0,
               0, 0, 0, 0, 0, 0]

# lock state
led_down_lock = [0,
                 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0]

led_up_lock = [0,
               0, 0, 0, 0, 0, 0,
               0, 0, 0, 0, 0, 0,
               0, 0, 0, 0, 0, 0,
               0, 0, 0, 0, 0, 0,
               0, 0, 0, 0, 0, 0]

sensor_lock = [0, 0, 0,
               0, 0, 0,
               0, 0, 0]

sensor_down_lock = [0, 0, 0,
                    0, 0, 0,
                    0, 0, 0]
sensor_up_lock = [0, 0, 0,
                  0, 0, 0,
                  0, 0, 0]
sensor_down_lock_cnt = [0]
sensor_up_lock_cnt = [0]
sensor_lock_cnt = [0]

# led inflence
sensor_influence_all = [[8, 2, 7, 9, 1, 3, 14, 15, 13],
                        [4, 3, 9, 10, 8, 5, 11, 2, 15, 16],
                        [5, 11, 12, 6, 10, 4, 17, 16, 18],
                        [14, 8, 20, 15, 13, 7, 19, 21, 9],
                        [15, 16, 9, 22, 21, 10, 14, 17, 8, 11, 20],
                        [17, 11, 23, 16, 18, 24, 22, 10, 12],
                        [20, 26, 19, 21, 27, 25, 14, 13, 15],
                        [28, 27, 21, 22, 23, 20, 29, 26, 15, 16],
                        [23, 29, 24, 28, 22, 30, 17, 16, 18]]
sensor_influence_value_all = [[94.5, 94.4, 58.3, 58.2, 58.1, 58.0, 29.4, 24.2, 24.1],
                              [76.7, 76.6, 76.6, 76.5, 38.1, 38.0, 38.0, 37.9, 26.8, 26.8],
                              [94.4, 94.4, 58.2, 58.1, 58.1, 58.0, 29.4, 24.2, 24.2],
                              [94.5, 62.1, 62.1, 58.1, 58.1, 41.2, 41.2, 41.2, 41.1],
                              [88.9, 88.3, 54.6, 54.4, 54.1, 54.0, 34.4, 34.4, 25.9, 25.8, 24.5],
                              [94.6, 62.2, 62.2, 58.2, 58.1, 41.3, 41.2, 41.1, 41.1],
                              [94.8, 94.3, 58.1, 58.1, 58.1, 58.0, 29.6, 24.2, 24.2],
                              [76.7, 76.6, 76.5, 76.5, 38.1, 38.1, 38.0, 37.9, 26.8, 26.8],
                              [94.7, 94.3, 58.2, 58.2, 58.0, 58.0, 29.5, 24.2, 24.2]]

sensor_influence_individual_part = [[8, 2, 7, 1],
                                    [4, 3, 9, 10],
                                    [5, 11, 12, 6],
                                    [14, 13],
                                    [15, 16],
                                    [17, 18],
                                    [20, 26, 19, 25],
                                    [28, 27, 21, 22],
                                    [23, 29, 24, 30]]
sensor_influence_value_individual_part = [[94.5, 94.4, 58.3, 58.1],
                                          [76.7, 76.6, 76.6, 76.5],
                                          [94.4, 94.4, 58.2, 58.1],
                                          [94.5, 58.1],
                                          [88.9, 88.3],
                                          [94.6, 58.1],
                                          [94.8, 94.3, 58.1, 58.0],
                                          [76.7, 76.6, 76.5, 76.5],
                                          [94.7, 94.3, 58.2, 58.0]]
sensor_influence_sum_part = [[8, 2, 7, 1],
                             [10, 9, 3, 4],
                             [11, 5, 12, 6],
                             [14, 13],
                             [15, 16],
                             [17, 18],
                             [20, 26, 19, 25],
                             [22, 21, 28, 27],
                             [23, 29, 24, 30]]
sensor_influence_value_sum_part = [[253.8, 181.8, 140.4, 105.5],
                                   [286.6, 286.3, 208.1, 207.5],
                                   [253.9, 181.6, 140.9, 105.5],
                                   [238.1, 140.0],
                                   [289.9, 289.3],
                                   [238.1, 140.7],
                                   [252.4, 181.6, 141.2, 105.0],
                                   [285.9, 285.6, 207.7, 207.5],
                                   [252.7, 181.4, 141.5, 105.1]]

sensor_influence_sum_part_reverse = [[1, 7, 2, 8],
                                     [4, 3, 9, 10],
                                     [6, 12, 5, 11],
                                     [13, 14],
                                     [16, 15],
                                     [18, 17],
                                     [25, 19, 26, 20],
                                     [27, 28, 21, 22],
                                     [30, 24, 29, 23]]
sensor_influence_value_sum_part_reverse = [[105.5, 140.4, 181.8, 253.8],
                                           [207.5, 208.1, 286.3, 286.6],
                                           [105.5, 140.9, 181.6, 253.9],
                                           [140.0, 238.1],
                                           [289.3, 289.9],
                                           [140.7, 238.1],
                                           [105.0, 141.2, 181.6, 252.4],
                                           [285.9, 285.6, 207.7, 207.5],
                                           [105.1, 141.5, 181.4, 252.7]]
#######################new sum part
sensor_influence_sum_part_reverse = [[1, 7, 2, 3, 8, 9],
                                     [4, 3, 9, 10],
                                     [6, 12, 5, 4, 11, 10],
                                     [13, 14, 20, 8, 15],
                                     [21, 22, 9, 10, 16, 15],
                                     [18, 17, 23, 11, 16],
                                     [25, 19, 26, 27, 20, 21],
                                     [27, 28, 21, 22],
                                     [30, 24, 29, 28, 23, 22]]
sensor_influence_value_sum_part_reverse = [[105.5, 140.4, 181.8, 208.1, 253.8, 286.3],
                                           [207.5, 208.1, 286.3, 286.6],
                                           [105.5, 140.9, 181.6, 207.5, 253.9, 286.6],
                                           [140.0, 238.1, 252.4, 253.8, 289.9],
                                           [285.6, 285.9, 286.3, 286.6, 289.3, 289.9],
                                           [140.7, 238.1, 252.7, 253.9, 289.3],
                                           [105.0, 141.2, 181.6, 207.5, 252.4, 285.6],
                                           [285.9, 285.6, 207.7, 207.5],
                                           [105.1, 141.5, 181.4, 207.7, 252.7, 285.9]]

sensor_influence_sum_all = [[15, 9, 8, 14, 3, 2, 7, 13, 1],
                            [15, 16, 10, 9, 11, 8, 3, 4, 2, 5],
                            [16, 10, 11, 17, 4, 5, 12, 18, 6],
                            [15, 9, 21, 8, 20, 14, 19, 7, 13],
                            [15, 16, 10, 9, 22, 21, 11, 8, 23, 20, 17, 14],
                            [16, 10, 22, 11, 23, 17, 24, 12, 18],
                            [15, 21, 20, 14, 27, 26, 19, 13, 25],
                            [15, 16, 22, 21, 23, 20, 28, 27, 26, 29],
                            [16, 22, 23, 17, 28, 29, 24, 18, 30]]
sensor_influence_value_sum_all = [
    [289.8907749, 286.3490037, 253.8269373, 238.0903321, 208.1389668, 181.7594834, 140.4187454, 140.0373432,
     105.4903321],
    [289.8907749, 289.3086347, 286.6149815, 286.3490037, 253.857048, 253.8269373, 208.1389668, 207.5430258, 181.7594834,
     181.6352768],
    [289.3086347, 286.6149815, 253.857048, 238.1442804, 207.5430258, 181.6352768, 140.921845, 140.7148339, 105.500369],
    [289.8907749, 286.3490037, 285.6037638, 253.8269373, 252.4343173, 238.0903321, 141.2405166, 140.4187454,
     140.0373432],
    [289.8907749, 289.3086347, 286.6149815, 286.3490037, 285.9199262, 285.6037638, 253.857048, 253.8269373, 252.7416974,
     252.4343173, 238.1442804, 238.0903321],
    [289.3086347, 286.6149815, 285.9199262, 253.857048, 252.7416974, 238.1442804, 141.5391144, 140.921845, 140.7148339],
    [289.8907749, 285.6037638, 252.4343173, 238.0903321, 207.4828044, 181.6390406, 141.2405166, 140.0373432,
     105.0349077],
    [289.8907749, 289.3086347, 285.9199262, 285.6037638, 252.7416974, 252.4343173, 207.701107, 207.4828044, 181.6390406,
     181.4069373],
    [289.3086347, 285.9199262, 252.7416974, 238.1442804, 207.701107, 181.4069373, 141.5391144, 140.7148339,
     105.0562362]]

sersor_influence_sum_all_reverse = []
sersor_influence_value_sum_all_reverse = []

sensor_influence_sum = [15, 16, 10, 9, 22, 21, 11, 8, 23, 20, 17, 14, 3, 28, 4, 27, 2, 26, 5, 29, 24, 19, 24, 19, 12,
                        18, 7, 13, 6, 1, 30, 25]
sensor_influence_value_sum = [2.898907749, 2.893086347, 2.866149815, 2.863490037, 2.859199262, 2.856037638, 2.53857048,
                              2.538269373, 2.527416974, 2.524343173,
                              2.381442804, 2.380903321, 2.081389668, 2.07701107, 2.075430258, 2.074828044, 1.817594834,
                              1.816390406, 1.816352768, 1.814069373,
                              1.415391144, 1.412405166, 1.40921845, 1.407148339, 1.404187454, 1.400373432, 1.05500369,
                              1.054903321, 1.050562362, 1.050349077]

inf_ind = [[8, 2, 7, 9, 1, 3, 14, 15, 13],
           [4, 3, 9, 10, 8, 5, 11, 2, 15, 16],
           [5, 11, 12, 6, 10, 4, 17, 16, 18],
           [14, 8, 20, 15, 13, 7, 19, 21, 9],
           [15, 16, 9, 22, 21, 10, 14, 17, 8, 11, 20, 23],
           [17, 11, 23, 16, 18, 24, 22, 10, 12],
           [20, 26, 19, 21, 27, 25, 14, 13, 15],
           [28, 27, 21, 22, 23, 20, 29, 26, 15, 16],
           [23, 29, 24, 28, 22, 30, 17, 16, 18]]

inf_ind_value = [[94.5, 94.4, 58.3, 58.2, 58.1, 58.0, 29.4, 24.2, 24.1],
                 [76.7, 76.6, 76.6, 76.5, 38.1, 38.0, 38.0, 37.9, 26.8, 26.8],
                 [94.4, 94.4, 58.2, 58.1, 58.1, 58.0, 29.4, 24.2, 24.2],
                 [94.5, 62.1, 62.1, 58.1, 58.1, 41.2, 41.2, 41.2, 41.1],
                 [88.9, 88.3, 54.6, 54.4, 54.1, 54.0, 34.4, 34.4, 25.9, 25.8, 24.5, 24.4],
                 [94.6, 62.2, 62.2, 58.2, 58.1, 41.3, 41.2, 41.1, 41.1],
                 [94.8, 94.3, 58.1, 58.1, 58.1, 58.0, 29.6, 24.2, 24.2],
                 [76.7, 76.6, 76.5, 76.5, 38.1, 38.1, 38.0, 37.9, 26.8, 26.8],
                 [94.7, 94.3, 58.2, 58.2, 58.0, 58.0, 29.5, 24.2, 24.2]]

inf_sum = [[15, 9, 8, 14, 3, 2, 7, 13, 1],
           [15, 16, 10, 9, 11, 8, 3, 4, 2, 5, 14, 17],
           [16, 10, 11, 17, 4, 5, 12, 18, 6],
           [15, 9, 21, 8, 20, 14, 19, 7, 13],
           [15, 16, 10, 9, 22, 21, 11, 8, 23, 20, 17, 14],
           [16, 10, 22, 11, 23, 17, 24, 12, 18],
           [15, 21, 20, 14, 27, 26, 19, 13, 25],
           [15, 16, 22, 21, 23, 20, 28, 27, 26, 29, 17, 14],
           [16, 22, 23, 17, 28, 29, 24, 18, 30]]
inf_sum_value = [
    [289.89, 286.34, 253.82, 238.09, 208.13, 181.75, 140.41, 140.03, 105.49],
    [289.89, 289.3, 286.61, 286.34, 253.85, 253.82, 208.13, 207.54, 181.75, 181.63, 238.09, 238.14],
    [289.3, 286.61, 253.85, 238.14, 207.54, 181.63, 140.92, 140.71, 105.5],
    [289.89, 286.35, 285.6, 253.83, 252.43, 238.09, 141.24, 140.42, 140.04],
    [289.89, 289.31, 286.61, 286.35, 285.92, 285.6, 253.86, 253.83, 252.74, 252.43, 238.14, 238.09],
    [289.31, 286.61, 285.92, 253.86, 252.74, 238.14, 141.54, 140.92, 140.71],
    [289.89, 285.6, 252.43, 238.09, 207.48, 181.64, 141.24, 140.04, 105.03],
    [289.89, 289.31, 285.92, 285.6, 252.74, 252.43, 207.7, 207.48, 181.64, 181.41, 238.14, 238.09],
    [289.31, 285.92, 252.74, 238.14, 207.7, 181.41, 141.54, 140.71, 105.06]]

inf_df = {'ind': []}
for i in range(len(inf_ind)):
    inf_df['ind'].append(pd.DataFrame([x for x in zip(inf_ind[i], inf_ind_value[i])], columns=['led', 'value']))
    inf_df['ind'][i] = inf_df['ind'][i].sort_values(by=['value'], axis=0, ascending=False)
dir_inf = []
dir_inf_temp = []
dir_inf_df = {'ind': [0]}

dir_inf_temp.append({'ind': {'right': [2, 3, 8, 9, 14, 15],
                             'rightdown': [8, 9, 14, 15],
                             'down': [7, 8, 9, 13, 14, 15]}})  # 1
dir_inf_temp.append({'ind': {'right': [4, 5, 10, 11, 16],
                             'rightdown': [10, 11, 16],
                             'down': [9, 10, 15, 16],
                             'leftdown': [8, 9, 15],
                             'left': [2, 3, 8, 9, 15]}})  # 2
dir_inf_temp.append({'ind': {'down': [10, 11, 12, 16, 17, 18],
                             'leftdown': [10, 11, 16, 17],
                             'left': [4, 5, 10, 11, 16, 17]}})  # 3
dir_inf_temp.append({'ind': {'up': [7, 8, 9, 13, 14, 15],
                             'rightup': [8, 9, 14, 15],
                             'right': [8, 9, 14, 15, 20, 21],
                             'rightdown': [14, 15, 20, 21],
                             'down': [13, 14, 15, 19, 20, 21]}})  # 4
dir_inf_temp.append({'ind': {'up': [9, 10, 15, 16],
                             'rightup': [10, 11, 16, 17],
                             'right': [10, 11, 16, 17, 22, 23],
                             'rightdown': [16, 17, 22, 23],
                             'down': [15, 16, 21, 22],
                             'leftdown': [14, 15, 20, 21],
                             'left': [8, 9, 14, 15, 20, 21],
                             'leftup': [8, 9, 14, 15]}})  # 5
dir_inf_temp.append({'ind': {'up': [10, 11, 12, 16, 17, 18],
                             'down': [16, 17, 18, 22, 23, 24],
                             'leftdown': [16, 17, 22, 23],
                             'left': [10, 11, 16, 17, 22, 23],
                             'leftup': [10, 11, 16, 17]}})  # 6
dir_inf_temp.append({'ind': {'up': [13, 14, 15, 19, 20, 21],
                             'rightup': [14, 15, 20, 21],
                             'right': [14, 15, 20, 21, 26, 27]}})  # 7
dir_inf_temp.append({'ind': {'up': [15, 16, 21, 22],
                             'rightup': [16, 22, 23],
                             'right': [16, 22, 23, 28, 29],
                             'left': [15, 20, 21, 26, 27],
                             'leftup': [15, 20, 21]}})  # 8
dir_inf_temp.append({'ind': {'up': [16, 17, 18, 22, 23, 24],
                             'left': [16, 17, 22, 23, 28, 29],
                             'leftup': [16, 17, 22, 23]}})  # 9

movement = [{'x': [0, 1],
             'y': [0, 1]},  # 1
            {'x': [0, 1, -1],
             'y': [0, 1]},  # 2
            {'x': [0, -1],
             'y': [0, 1]},  # 3
            {'x': [0, 1],
             'y': [0, 1, -1]},  # 4
            {'x': [0, 1, -1],
             'y': [0, 1, -1]},  # 5
            {'x': [0, -1],
             'y': [0, 1, -1]},  # 6
            {'x': [0, 1],
             'y': [0, -1]},  # 7
            {'x': [0, 1, -1],
             'y': [0, -1]},  # 8
            {'x': [0, -1],
             'y': [0, -1]}]  # 9
direction = {'lr': {0: '', -1: 'left', 1: 'right'},
             'ud': {0: '', -1: 'up', 1: 'down'}}

# 초기 변수 설정
wait_curr = 0
wait_illum = [0, 0, 0, 0, 0, 0, 0, 0, 0]

# 추가변수
led_state_lux = [0,
                 24, 59, 31, 32, 112, 24,
                 24, 231, 72, 72, 169, 24,
                 24, 24, 24, 24, 24, 24,
                 24, 231, 68, 68, 169, 24,
                 24, 45, 29, 29, 135, 24]

led_state_case = [
    [0,
     1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1],
    [0,
     230, 230, 230, 230, 230, 230,
     230, 230, 230, 230, 230, 230,
     230, 230, 230, 230, 230, 230,
     230, 230, 230, 230, 230, 230,
     230, 230, 230, 230, 230, 230],
    [0,
     230, 230, 230, 230, 230, 230,
     230, 230, 230, 230, 230, 230,
     1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1],
    [0,
     1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1,
     230, 230, 230, 230, 230, 230,
     230, 230, 230, 230, 230, 230]]
led_state_case_limit = [300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300, 300,
                        300]
led_max_state = [0,
                 1, 4, 1, 2, 5, 1,
                 1, 9, 4, 4, 7, 1,
                 1, 1, 1, 1, 1, 1,
                 1, 9, 3, 3, 8, 2,
                 1, 4, 1, 2, 8, 2]

led_state_lux = [0,
                 24, 98, 46, 37, 139, 24,
                 24, 200, 78, 73, 139, 24,
                 24, 24, 38, 24, 24, 24,
                 24, 201, 68, 66, 148, 24,
                 24, 88, 28, 45, 166, 24]

led_state = [0,
             1, 1, 1, 1, 1, 1,
             1, 1, 1, 1, 1, 1,
             1, 1, 1, 1, 1, 1,
             1, 1, 1, 1, 1, 1,
             1, 1, 1, 1, 1, 1]
illum_add = [100, 200, 200,
             0, 100, 200,
             0, 0, 100]
illum_add = [0, 0, 0,
             0, 0, 0,
             0, 0, 0]

# 조도 계산 시뮬레이션을 위한 영향도 (추후 수정예정)
led_ind_inf = [[],  # 0번
               [0.581236900369004, 0.130140959409594, 0.0302361623616236, 0.154492988929889, 0.0557926199261993,
                0.0207011070110701, 0.0489173431734317, 0.0191453874538745, 0.014239852398524],
               # 1번
               [0.944045756457565, 0.379093726937269, 0.0719018450184502, 0.19019926199262, 0.104270848708487,
                0.0303867158671587, 0.0519785977859779, 0.030010332103321, 0.0157077490774908],
               # 2번
               [0.580208118081181, 0.766053874538746, 0.187639852398524, 0.154831734317343, 0.187112915129151,
                0.0857276752767528, 0.048189667896679, 0.0507490774907749, 0.0208767527675277],
               # 3번
               [0.187664944649447, 0.766681180811808, 0.580157933579336, 0.086329889298893, 0.179785977859779,
                0.154467896678967, 0.0212154981549816, 0.0507992619926199, 0.0483276752767528],
               # 4번
               [0.0720022140221402, 0.379545387453875, 0.944359409594096, 0.0302612546125461, 0.103417712177122,
                0.189885608856089, 0.0160339483394834, 0.0288560885608856, 0.0519911439114391],
               # 5번
               [0.030010332103321, 0.130768265682657, 0.580923247232472, 0.0201741697416974, 0.0562442804428044,
                0.154480442804428, 0.0147542435424354, 0.0194214022140221, 0.0482273062730627],
               # 6번
               [0.583081180811808, 0.130391881918819, 0.0264723247232472, 0.411563099630996, 0.0815874538745388,
                0.0263217712177122, 0.100431734317343, 0.0261084870848708, 0.018229520295203],
               # 7번
               [0.944823616236162, 0.380862730627306, 0.0687025830258303, 0.621459778597786, 0.259064944649447,
                0.054989667896679, 0.12020442804428, 0.0659675276752767, 0.0221940959409594],
               # 8번
               [0.581952029520295, 0.766078966789668, 0.174980811808118, 0.411036162361624, 0.546132841328413,
                0.143552767527675, 0.101059040590406, 0.109590405904059, 0.0291070110701107],
               # 9번
               [0.186686346863469, 0.765112915129151, 0.58099852398524, 0.14370332103321, 0.53969667896679,
                0.410960885608856, 0.0291948339483395, 0.109138745387454, 0.100657564575646],
               # 10번
               [0.0727549815498155, 0.38039852398524, 0.944271586715867, 0.0539608856088561, 0.258023616236162,
                0.622087084870849, 0.0215918819188192, 0.0653276752767528, 0.120154243542435],
               # 11번
               [0.0296590405904059, 0.130053136531365, 0.581512915129151, 0.0251173431734317, 0.0866184501845018,
                0.411412546125461, 0.0178907749077491, 0.0260833948339483, 0.100870848708487],
               # 12번
               [0.241224354243542, 0.0763682656826568, 0.0222442804428044, 0.580973431734317, 0.110230258302583,
                0.0282287822878229, 0.241625830258303, 0.0764937269372694, 0.0229845018450184],
               # 13번
               [0.294244280442804, 0.17770332103321, 0.0382782287822878, 0.944986715867159, 0.343914391143911,
                0.0703837638376384, 0.295850184501845, 0.176988191881919, 0.0385542435424354],
               # 14번
               [0.242064944649447, 0.268311439114391, 0.11250110701107, 0.581186715867159, 0.889419926199262,
                0.18130405904059, 0.2424036900369, 0.267734317343173, 0.113981549815498],
               # 15번
               [0.112588929889299, 0.268461992619926, 0.241926937269373, 0.181793357933579, 0.882908487084871,
                0.581563099630996, 0.11350479704797, 0.268211070110701, 0.242127675276753],
               # 16번
               [0.0387047970479705, 0.177188929889299, 0.294281918819188, 0.0705719557195572, 0.343939483394834,
                0.945726937269373, 0.0381653136531365, 0.177916605166052, 0.294946863468635],
               # 17번
               [0.0228339483394834, 0.0756907749077491, 0.241876752767528, 0.0276642066420664, 0.116365313653137,
                0.58119926199262, 0.0231726937269373, 0.0763306273062731, 0.242014760147601],
               # 18번
               [0.100030258302583, 0.0259955719557196, 0.0181166051660517, 0.412064944649446, 0.0933682656826568,
                0.0247535055350554, 0.581412546125461, 0.129350553505535, 0.0273129151291513],
               # 19번
               [0.119790405904059, 0.0652774907749077, 0.0217047970479705, 0.621459778597786, 0.244912915129151,
                0.0540361623616236, 0.947935055350554, 0.380511439114391, 0.0687151291512915],
               # 20번
               [0.100180811808118, 0.110054612546125, 0.0294833948339483, 0.411763837638376, 0.541152029520295,
                0.143389667896679, 0.580747601476015, 0.76510036900369, 0.174165313653137],
               # 21번
               [0.0288686346863469, 0.110330627306273, 0.0997793357933579, 0.14410479704797, 0.544338745387454,
                0.412215498154982, 0.174729889298893, 0.765037638376384, 0.579794095940959],
               # 22번
               [0.0221940959409594, 0.0654154981549815, 0.119915867158672, 0.0547512915129151, 0.245339483394834,
                0.622074538745387, 0.0689660516605166, 0.38130184501845, 0.947458302583026],
               # 23번
               [0.0184177121771218, 0.0253431734317343, 0.0998546125461255, 0.0250546125461255, 0.095049446494465,
                0.412742435424354, 0.0274885608856089, 0.129915129151291, 0.581525461254613],
               # 24번
               [0.0481269372693727, 0.0192332103321033, 0.0139763837638376, 0.155120295202952, 0.0528944649446494,
                0.0202118081180812, 0.579819188191882, 0.131521033210332, 0.0294457564575646],
               # 25번
               [0.0516147601476015, 0.0296464944649446, 0.0151933579335793, 0.189584501845018, 0.105249446494465,
                0.0305749077490775, 0.942878966789668, 0.379319557195572, 0.0723284132841328],
               # 26번
               [0.0489047970479705, 0.0503350553505535, 0.0212405904059041, 0.155459040590406, 0.178368265682657,
                0.0856022140221402, 0.58129963099631, 0.766267158671587, 0.187351291512915],
               # 27번
               [0.0211276752767528, 0.0502221402214022, 0.0486036900369004, 0.0862546125461255, 0.180438376383764,
                0.154806642066421, 0.187175645756458, 0.766806642066421, 0.581575645756458],
               # 28번
               [0.0152560885608856, 0.0291948339483395, 0.0523926199261993, 0.0301483394833948, 0.103078966789668,
                0.18949667896679, 0.0717763837638376, 0.379583025830258, 0.943142435424354],
               # 29번
               [0.0141394833948339, 0.0193837638376384, 0.0487291512915129, 0.0201490774907749, 0.0532332103321033,
                0.155383763837638, 0.0290693726937269, 0.130228782287823, 0.580245756457565]]  # 30번


if __name__=='__main__':
    print("%30s%31s%31s"%('Control Lux', 'LED UP LOCK', 'LED DOWN LOCK'))
    for idx in range(1, len(led_state), 6):
        for j in range(0, 6):
            print("%05s" % led_state_lux[idx+j], end='')
        print('|', end='')
        for j in range(0, 6):
            print("%05s" % led_up_lock[idx+j], end='')
        print('|', end='')
        for j in range(0, 6):
            print("%05s" % led_down_lock[idx+j], end='')
        print()


    print("%30s%31s"%('SENSOR UP LOCK', 'SENSOR DOWN LOCK'))
    for idx in range(0, len(sensor_down_lock), 3):
        for j in range(0, 3):
            print("%10s" % sensor_up_lock[idx + j], end='')
        print('|', end='')
        for j in range(0, 3):
            print("%10s" % sensor_down_lock[idx + j], end='')
        print()
